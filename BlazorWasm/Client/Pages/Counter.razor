@page "/counter"
@using System.Threading
@using BlazorWasm.Shared
@inherits ComputedStateComponent<string>
@inject ICounterService _counter

@{
    var state = State.ValueOrDefault;
    var error = State.Error;
}
<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

@if (error != null) {
    <div class="alert alert-warning" role="alert">Update error: @error.Message</div>
}

<p>Count: @state</p>

<button class="btn btn-primary" @onclick="Increment">Click me</button>

@code {
    protected override async Task<string> ComputeState(CancellationToken cancellationToken)
    {
        var count = await _counter.Get();
        return $"{count}";
    }

    private async Task Increment()
    {
        await _counter.Increment();
    }
}
